<!DOCTYPE html>
<html>
<head>
    <title>OAuth Callback</title>
</head>
<body>
    <script>
        console.log("Callback page loaded.");
        const hashParams = new URLSearchParams(window.location.hash.substring(1));
        const accessToken = hashParams.get('access_token');
        console.log("Access Token:", accessToken);

        if (accessToken) {
            // Store the token in clientStorage
            window.parent.postMessage({
                pluginMessage: {
                    type: "store-token",
                    token: accessToken
                }
            },"*");
            window.close();
        } else {
            console.error("Access token not found in URL.");
        }
    </script>
</body>
</html>