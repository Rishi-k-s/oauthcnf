<!DOCTYPE html>
<html>
<head>
    <title>OAuth Callback</title>
</head>
<body>
    <script>
        console.log("Callback page loaded."); // Add this line
        const hashParams = new URLSearchParams(window.location.hash.substring(1));
        const accessToken = hashParams.get('access_token');
        console.log("Access Token:", accessToken); //add this line.

        if (accessToken) {
            window.opener.postMessage({
                pluginMessage: {
                    type: "auth-success",
                    token: accessToken
                }
            }, "*");
            window.close();
        } else {
            console.error("Access token not found in URL.");
        }
    </script>
</body>
</html>